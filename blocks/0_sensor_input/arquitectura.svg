<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700" viewBox="0 0 1200 700">
<defs>
    <!-- GLOBAL FILTERS -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
        <feDropShadow dx="3" dy="3" stdDeviation="4" flood-opacity="0.15"/>
    </filter>

    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
        <polygon points="0 0, 10 3.5, 0 7" fill="#546e7a"/>
    </marker>

    <style>
        /* FONTS */
        text { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; fill: #212121; }
        .title { font-weight: 800; font-size: 22px; fill: #ffffff; }
        .subtitle { font-size: 14px; fill: #eceff1; }
        .label { font-weight: 700; font-size: 14px; fill: #0d47a1; }
        .detail { font-size: 11px; fill: #455a64; }
        .model { font-family: 'Consolas', 'Courier New', monospace; font-size: 10px; font-weight: 600; fill: #0d47a1; }
        .param { font-family: 'Consolas', 'Courier New', monospace; font-size: 10px; fill: #1565c0; }
        
        /* BOXES mapped to Standard Palette */
        .box-main { fill: #e3f2fd; stroke: #1565c0; stroke-width: 3; filter: url(#shadow); rx: 12; }
        .box-camera { fill: #ffffff; stroke: #1565c0; stroke-width: 2; filter: url(#shadow); rx: 8; }
        .box-isp { fill: #e0f2f1; stroke: #00695c; stroke-width: 2; filter: url(#shadow); rx: 8; }
        .box-health { fill: #ffebee; stroke: #c62828; stroke-width: 2; filter: url(#shadow); rx: 8; }
        .box-output { fill: #fff3e0; stroke: #ef6c00; stroke-width: 2; filter: url(#shadow); rx: 8; }
        
        /* COMMON */
        .arrow { stroke: #546e7a; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
        .badge { fill: #263238; rx: 4; }
        .badge-text { font-size: 9px; font-weight: 700; fill: #fff; font-family: 'Consolas', monospace; }
    </style>
</defs>

<!-- HEADER -->
<rect x="0" y="0" width="1200" height="70" fill="#1565c0"/>
<text x="600" y="35" text-anchor="middle" class="title">LAYER 0: SENSOR INPUT</text>
<text x="600" y="55" text-anchor="middle" class="subtitle">Monocular RGB Suite • IMX490 HDR • Health Monitoring • 16ms Capture</text>

<!-- MAIN CONTAINER -->
<rect x="30" y="85" width="1140" height="580" class="box-main"/>

<!-- PRIMARY CAMERA -->
<g transform="translate(50, 110)">
    <rect x="0" y="0" width="280" height="220" class="box-camera"/>
    <text x="140" y="25" text-anchor="middle" class="label" fill="#1976d2">PRIMARY OPTICAL</text>
    
    <rect x="15" y="40" width="250" height="35" rx="4" fill="#e3f2fd" stroke="#1976d2"/>
    <text x="140" y="55" text-anchor="middle" class="model">Sony IMX490 (CMOS)</text>
    <text x="140" y="70" text-anchor="middle" class="param">1920×1080 @ 60fps</text>
    
    <rect x="15" y="85" width="250" height="35" rx="4" fill="#e3f2fd" stroke="#1976d2"/>
    <text x="140" y="100" text-anchor="middle" class="model">HDR 120dB Dynamic Range</text>
    <text x="140" y="115" text-anchor="middle" class="param">Tunnels + Direct Sun</text>
    
    <rect x="15" y="130" width="250" height="35" rx="4" fill="#e3f2fd" stroke="#1976d2"/>
    <text x="140" y="145" text-anchor="middle" class="model">Wide Angle Lens</text>
    <text x="140" y="160" text-anchor="middle" class="param">90° FoV • GMSL2 Interface</text>
    
    <rect x="100" y="180" width="80" height="18" class="badge"/>
    <text x="140" y="193" text-anchor="middle" class="badge-text">PRIMARY</text>
</g>

<!-- SECONDARY CAMERA (Optional) -->
<g transform="translate(50, 350)">
    <rect x="0" y="0" width="280" height="150" class="box-camera" style="stroke-dasharray: 5,3"/>
    <text x="140" y="25" text-anchor="middle" class="label" fill="#1976d2">SECONDARY (Optional)</text>
    
    <rect x="15" y="45" width="250" height="35" rx="4" fill="#e3f2fd" stroke="#1976d2"/>
    <text x="140" y="60" text-anchor="middle" class="model">Telephoto Lens</text>
    <text x="140" y="75" text-anchor="middle" class="param">15° FoV • &gt;200m range</text>
    
    <rect x="15" y="90" width="250" height="35" rx="4" fill="#e3f2fd" stroke="#1976d2"/>
    <text x="140" y="105" text-anchor="middle" class="model">1080p @ 30fps</text>
    <text x="140" y="120" text-anchor="middle" class="param">Early obstacle detection</text>
</g>

<!-- ARROWS TO ISP -->
<line x1="330" y1="220" x2="400" y2="220" class="arrow"/>
<line x1="330" y1="420" x2="400" y2="420" class="arrow"/>

<!-- ISP PIPELINE -->
<g transform="translate(400, 110)">
    <rect x="0" y="0" width="280" height="400" class="box-isp"/>
    <text x="140" y="25" text-anchor="middle" class="label" fill="#2e7d32">ISP PIPELINE</text>
    <text x="140" y="42" text-anchor="middle" class="detail">On-Chip Processing</text>
    
    <rect x="20" y="60" width="240" height="40" rx="4" fill="#fff" stroke="#2e7d32"/>
    <text x="140" y="75" text-anchor="middle" class="model">1. DEMOSAIC</text>
    <text x="140" y="90" text-anchor="middle" class="param">Bayer → RGB</text>
    
    <rect x="20" y="110" width="240" height="40" rx="4" fill="#fff" stroke="#2e7d32"/>
    <text x="140" y="125" text-anchor="middle" class="model">2. DENOISE</text>
    <text x="140" y="140" text-anchor="middle" class="param">Temporal + Spatial</text>
    
    <rect x="20" y="160" width="240" height="40" rx="4" fill="#fff" stroke="#2e7d32"/>
    <text x="140" y="175" text-anchor="middle" class="model">3. HDR TONE MAP</text>
    <text x="140" y="190" text-anchor="middle" class="param">120dB → 8-bit</text>
    
    <rect x="20" y="210" width="240" height="40" rx="4" fill="#fff" stroke="#2e7d32"/>
    <text x="140" y="225" text-anchor="middle" class="model">4. WHITE BALANCE</text>
    <text x="140" y="240" text-anchor="middle" class="param">Auto AWB</text>
    
    <rect x="20" y="260" width="240" height="40" rx="4" fill="#fff" stroke="#2e7d32"/>
    <text x="140" y="275" text-anchor="middle" class="model">5. GAMMA</text>
    <text x="140" y="290" text-anchor="middle" class="param">sRGB curve</text>
    
    <rect x="100" y="320" width="80" height="18" class="badge" style="fill:#2e7d32"/>
    <text x="140" y="333" text-anchor="middle" class="badge-text">ON-CHIP</text>
    
    <text x="140" y="365" text-anchor="middle" class="detail" fill="#2e7d32">0ms additional latency</text>
    <text x="140" y="380" text-anchor="middle" class="detail" fill="#2e7d32">(runs in parallel)</text>
</g>

<!-- ARROW TO OUTPUT -->
<line x1="680" y1="310" x2="750" y2="310" class="arrow"/>

<!-- HEALTH MONITOR -->
<g transform="translate(750, 110)">
    <rect x="0" y="0" width="280" height="200" class="box-health"/>
    <text x="140" y="25" text-anchor="middle" class="label" fill="#d32f2f">HEALTH MONITOR</text>
    
    <rect x="20" y="45" width="240" height="30" rx="4" fill="#fff" stroke="#d32f2f"/>
    <text x="140" y="65" text-anchor="middle" class="param">Thermal Check (&lt;85°C)</text>
    
    <rect x="20" y="85" width="240" height="30" rx="4" fill="#fff" stroke="#d32f2f"/>
    <text x="140" y="105" text-anchor="middle" class="param">FPS Jitter (&lt;5ms)</text>
    
    <rect x="20" y="125" width="240" height="30" rx="4" fill="#fff" stroke="#d32f2f"/>
    <text x="140" y="145" text-anchor="middle" class="param">Lens Blockage Detection</text>
    
    <rect x="100" y="165" width="80" height="18" class="badge" style="fill:#d32f2f"/>
    <text x="140" y="178" text-anchor="middle" class="badge-text">WATCHDOG</text>
</g>

<!-- OUTPUT -->
<g transform="translate(750, 340)">
    <rect x="0" y="0" width="280" height="170" class="box-output"/>
    <text x="140" y="25" text-anchor="middle" class="label" fill="#ef6c00">OUTPUT</text>
    
    <rect x="20" y="45" width="240" height="35" rx="4" fill="#fff" stroke="#ef6c00"/>
    <text x="140" y="60" text-anchor="middle" class="model">frame [1080×1920×3]</text>
    <text x="140" y="75" text-anchor="middle" class="param">RGB, GPU Memory</text>
    
    <rect x="20" y="90" width="240" height="35" rx="4" fill="#fff" stroke="#ef6c00"/>
    <text x="140" y="105" text-anchor="middle" class="model">frame_metadata</text>
    <text x="140" y="120" text-anchor="middle" class="param">timestamp, exposure, temp</text>
    
    <rect x="100" y="135" width="80" height="18" class="badge"/>
    <text x="140" y="148" text-anchor="middle" class="badge-text">16 ms</text>
</g>

<!-- LEGEND -->
<g transform="translate(50, 540)">
    <text x="0" y="15" class="label">COMPONENTS:</text>
    <rect x="120" y="3" width="18" height="18" class="box-camera"/>
    <text x="145" y="17" class="detail">Camera</text>
    <rect x="200" y="3" width="18" height="18" class="box-isp"/>
    <text x="225" y="17" class="detail">ISP</text>
    <rect x="260" y="3" width="18" height="18" class="box-health"/>
    <text x="285" y="17" class="detail">Health</text>
    <rect x="340" y="3" width="18" height="18" class="box-output"/>
    <text x="365" y="17" class="detail">Output</text>
</g>

</svg>
